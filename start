#!/bin/bash
# AutoGetCars Crawler - Ultimate Launcher
# One script to rule them all!

cd "$(dirname "$0")"

echo "ğŸš— AutoGetCars Crawler - Choose Your Method"
echo "=========================================="
echo

# Check if .venv exists
if [ ! -d ".venv" ]; then
    echo "âŒ Python environment not found!"
    echo "ğŸ’¡ Run: python3 -m venv .venv && .venv/bin/pip install -r requirements.txt"
    exit 1
fi

echo "ğŸ“‹ Available Methods:"
echo "--------------------"
echo " 1. ğŸš€ Quick Menu (Smart defaults, 1-click options)"
echo " 2. âš™ï¸ Advanced Menu (Full control, uses presets safely)" 
echo " 3. ğŸ“ Switch Presets (Change main .env configuration)"
echo " 4. âš¡ Direct Run (Use current .env settings)"
echo " 5. ğŸ“– Help & Documentation"
echo " q. ğŸšª Quit"
echo

while true; do
    read -p "Select method (1-5, q): " choice
    
    case $choice in
        1)
            echo "ğŸš€ Launching Quick Menu..."
            .venv/bin/python quick_crawler.py
            ;;
        2)  
            echo "âš™ï¸ Launching Advanced Menu..."
            .venv/bin/python menu_crawler.py
            ;;
        3)
            echo "ğŸ“ Launching Preset Switcher..."
            ./switch-preset
            ;;
        4)
            echo "âš¡ Running crawler directly with current .env settings..."
            .venv/bin/python crawler.py
            break
            ;;
        5)
            echo "ğŸ“– Help & Documentation"
            echo "======================"
            echo
            echo "ğŸš€ QUICK MENU:"
            echo "   â€¢ One-click presets with smart defaults"
            echo "   â€¢ BMW X5, Honda CR-V, Toyota Corolla quick options" 
            echo "   â€¢ Advanced options available"
            echo
            echo "âš™ï¸ ADVANCED MENU:"
            echo "   â€¢ Uses preset files from presets/ folder"
            echo "   â€¢ Does NOT modify your main .env file"
            echo "   â€¢ Full customization of speed and pages"
            echo
            echo "ğŸ“ PRESET SWITCHER:"
            echo "   â€¢ Changes your main .env configuration"
            echo "   â€¢ 10 predefined car search presets"
            echo "   â€¢ Automatic backups when switching"
            echo
            echo "âš¡ DIRECT RUN:"
            echo "   â€¢ Uses whatever is in your main .env"
            echo "   â€¢ Most control over command line options"
            echo "   â€¢ Good for testing specific settings"
            echo
            echo "ğŸ“‚ FILES:"
            echo "   â€¢ Main config: .env"
            echo "   â€¢ Preset configs: presets/.env.*"
            echo "   â€¢ Results: docs/car-data.xlsx"
            echo "   â€¢ Logs: crawler.log"
            echo
            read -p "Press Enter to continue..."
            ;;
        q|Q)
            echo "ğŸ‘‹ Happy car hunting!"
            exit 0
            ;;
        *)
            echo "âŒ Invalid choice. Please try again."
            ;;
    esac
    
    echo
    echo "Press Enter to return to menu..."
    read
    echo
done